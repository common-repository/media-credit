/*! media-credit media-credit-image-properties.js 2023-04-01 5:33:50 PM */
!function(e){"use strict";var i,s,l=mundschenk.mediaCredit||{};e.media.events&&(i=e.Backbone.View.extend({className:"advanced-media-credit",template:e.media.template("media-credit-image-properties"),initialize:function(){e.Backbone.View.prototype.initialize.apply(this,arguments)},prepare:function(){return this.model.toJSON()},render:function(){return e.Backbone.View.prototype.render.apply(this,arguments),this}}),e.media.events.on("editor:frame-create",function(e){(s=e.frame).on("content:render:image-details",function(e){var t=new i({model:e.model});e.on("post-render",function(){e.views.insert(e.$el.find(".advanced-settings"),t.render().el,{at:1}),l.autoComplete(t,'input[data-setting="mediaCreditText"]',!1)})})}),e.media.events.on("editor:image-edit",function(e){""===e.metadata.mediaCreditText&&""!==e.metadata.mediaCreditAuthorID&&(e.metadata.mediaCreditText=l.id[e.metadata.mediaCreditAuthorID])}),e.media.events.on("editor:image-update",function(e){var t=e.editor,i=t.dom,e=e.image,a=s.content.get().model,d=a.get("align"),r=parseInt(a.get("width"),10),n=a.get("mediaCreditText"),o=a.get("mediaCreditAuthorID"),m=a.get("mediaCreditLink"),c=a.get("mediaCreditNoFollow"),p=e.parentNode&&"A"===e.parentNode.nodeName?i.getNext(e.parentNode,".mceMediaCreditTemp"):i.getNext(e,".mceMediaCreditTemp");l.id[o]!==n&&(o=""),"custom"===a.get("size")&&(r=parseInt(a.get("customWidth"))),a=(a=o?l.id[o]+l.options.separator+l.options.organization:n).replace(/<[^>]+>(.*)<\/[^>]+>/g,"$1"),d="align"+(d||"none"),null===p&&(n||o)&&(p=i.create("span",{class:"mceMediaCreditTemp mceNonEditable","data-media-credit-author-id":o,"data-media-credit-text":n,"data-media-credit-align":d,"data-media-credit-link":m,"data-media-credit-nofollow":c},a),e.parentNode&&"A"===e.parentNode.nodeName?i.insertAfter(p,e.parentNode):i.insertAfter(p,e)),p&&(i.getParent(p,"dl.wp-caption")||(t.getParam("wpeditimage_html5_captions")||(r+=10),e=i.create("div",{class:"mceMediaCreditOuterTemp "+d,style:"width: "+r+"px"}),i.insertAfter(e,p.parentNode),i.add(e,p.parentNode),i.remove(p.parentNode,!0)),i.setAttrib(p,"data-media-credit-text",n),i.setAttrib(p,"data-media-credit-author-id",o),i.setAttrib(p,"data-media-credit-link",m),i.setAttrib(p,"data-media-credit-nofollow",c),i.setHTML(p,a))}))}((jQuery,wp));